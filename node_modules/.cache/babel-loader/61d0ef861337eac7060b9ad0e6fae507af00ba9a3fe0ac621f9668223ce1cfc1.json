{"ast":null,"code":"export default {\n  data: () => ({\n    dialog: false,\n    dialogDelete: false,\n    headers: [{\n      text: \"Name\",\n      align: \"start\",\n      sortable: false,\n      value: \"productName\"\n    }, {\n      text: \"Picture\",\n      sortable: false,\n      value: \"productPicture\"\n    }, {\n      text: \"Description\",\n      value: \"productDescription\"\n    }, {\n      text: \"actions\",\n      align: \"start\",\n      sortable: false,\n      value: \"actions\"\n    }],\n    desserts: [],\n    editedIndex: -1,\n    editedItem: {\n      productName: \"\",\n      productDescription: \"\",\n      selectedImage: null\n    },\n    defaultItem: {\n      productName: \"\",\n      productDescription: \"\",\n      selectedImage: null\n    }\n  }),\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"New Product\" : \"Edit Product\";\n    }\n  },\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    }\n  },\n  created() {\n    this.initialize();\n  },\n  methods: {\n    async initialize() {\n      this.desserts = [];\n      try {\n        var data = await this.axios.get(\"http://localhost:8080/product\");\n        console.log(\"data product ====>\", data);\n        this.desserts = data.data;\n      } catch (error) {}\n    },\n    openDialog(action, item) {\n      this.editedIndex = this.desserts.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n    async deleteItem(item) {\n      this.editedIndex = this.desserts.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n    async addProduct() {\n      try {\n        const formData = new FormData();\n        const data = {\n          productName: this.editedItem.productName,\n          productDescription: this.editedItem.productDescription\n        };\n        formData.append(\"body\", JSON.stringify(data));\n        formData.append(\"photo\", this.editedItem.selectedImage);\n        this.axios.post(\"http://localhost:8080/product\", formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        }).then(response => {\n          if (response.status === 201) {\n            this.initialize();\n            alert(\"เพิ่มสำเร็จ\");\n\n            // Check if window.product is defined and has a reload method\n            if (window.product && typeof window.product.reload === 'function') {\n              window.product.reload();\n            } else {\n              console.error('Cannot call reload: window.product or window.product.reload is undefined');\n            }\n          }\n        }).catch(error => {\n          console.error(\"Error adding product:\", error);\n          if (error.response) {\n            console.log(\"Response data:\", error.response.data);\n            console.log(\"Response status:\", error.response.status);\n            console.log(\"Response headers:\", error.response.headers);\n          }\n        });\n      } catch (error) {\n        console.error(\"Error in addProduct:\", error);\n      }\n    },\n    deleteItemConfirm() {\n      this.desserts.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n    close() {\n      this.dialog = false;\n      this.editedItem = Object.assign({}, this.defaultItem);\n      this.editedIndex = -1;\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    }\n  }\n};","map":{"version":3,"names":["data","dialog","dialogDelete","headers","text","align","sortable","value","desserts","editedIndex","editedItem","productName","productDescription","selectedImage","defaultItem","computed","formTitle","watch","val","close","closeDelete","created","initialize","methods","axios","get","console","log","error","openDialog","action","item","indexOf","Object","assign","deleteItem","addProduct","formData","FormData","append","JSON","stringify","post","then","response","status","alert","window","product","reload","catch","deleteItemConfirm","splice","$nextTick"],"sources":["src/components/EditDelete.vue"],"sourcesContent":["<template>\n  <div>\n    <v-data-table :headers=\"headers\" :items=\"desserts\" class=\"elevation-1\">\n      <template v-slot:top>\n        <v-toolbar flat>\n          <v-toolbar-title>จัดการ Product</v-toolbar-title>\n          <v-divider class=\"mx-4\" inset vertical></v-divider>\n          <v-spacer></v-spacer>\n          <v-dialog v-model=\"dialog\" max-width=\"500px\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\">\n                เพิ่ม\n              </v-btn>\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class=\"text-h5\">{{ formTitle }}</span>\n              </v-card-title>\n\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                      <v-file-input v-model=\"editedItem.selectedImage\" label=\"Select Image\" accept=\"image/*\"></v-file-input>\n                    </v-col>\n\n                    <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                      <v-text-field v-model=\"editedItem.productName\" label=\"Name\"></v-text-field>\n                      <v-text-field v-model=\"editedItem.productDescription\" label=\"Description\"></v-text-field>\n                    </v-col>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"red darken-1\" text @click=\"close\"> Cancel </v-btn>\n                <v-btn color=\"blue darken-1\" text @click=\"addProduct\"> Save </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n          <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\n            <v-card>\n              <v-card-title class=\"text-h5\">คุณแน่ใจหรือว่าต้องการลบรายการนี้?</v-card-title>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"closeDelete\"> Cancel </v-btn>\n                <v-btn color=\"red darken-1\" text @click=\"deleteItemConfirm\"> OK </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:item.productPicture=\"{ item }\">\n        <img :src=\"'data:image/jpeg;base64,' + item.productPicture\" alt=\"Image\" style=\"max-width: 200px\" />\n      </template>\n\n      <template v-slot:item.actions=\"{ item }\">\n        <v-btn small outlined @click=\"openDialog('edit', item)\" color=\"blue\">\n          <v-icon>mdi-pencil</v-icon>\n        </v-btn>\n\n        <v-btn small outlined @click=\"deleteItem(item)\" color=\"red\" class=\"ml-2\">\n          <v-icon>mdi-delete</v-icon>\n        </v-btn>\n      </template>\n      <template v-slot:no-data>\n        <v-btn color=\"primary\" @click=\"initialize\"> Reset </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    dialog: false,\n    dialogDelete: false,\n    headers: [\n      {\n        text: \"Name\",\n        align: \"start\",\n        sortable: false,\n        value: \"productName\",\n      },\n      {\n        text: \"Picture\",\n        sortable: false,\n        value: \"productPicture\",\n      },\n      {\n        text: \"Description\",\n        value: \"productDescription\",\n      },\n      {\n        text: \"actions\",\n        align: \"start\",\n        sortable: false,\n        value: \"actions\",\n      },\n    ],\n\n    desserts: [],\n    editedIndex: -1,\n\n    editedItem: {\n      productName: \"\",\n      productDescription: \"\",\n      selectedImage: null,\n    },\n    defaultItem: {\n      productName: \"\",\n      productDescription: \"\",\n      selectedImage: null,\n    },\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"New Product\" : \"Edit Product\";\n    },\n  },\n\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    },\n  },\n\n  created() {\n    this.initialize();\n  },\n\n  methods: {\n    async initialize() {\n      this.desserts = [];\n      try {\n        var data = await this.axios.get(\"http://localhost:8080/product\");\n        console.log(\"data product ====>\", data);\n        this.desserts = data.data;\n      } catch (error) {}\n    },\n\n    openDialog(action, item) {\n      this.editedIndex = this.desserts.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n\n    async deleteItem(item) {\n      this.editedIndex = this.desserts.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n\n    async addProduct() {\n  try {\n    const formData = new FormData();\n    const data = {\n      productName: this.editedItem.productName,\n      productDescription: this.editedItem.productDescription,\n    };\n\n    formData.append(\"body\", JSON.stringify(data));\n    formData.append(\"photo\", this.editedItem.selectedImage);\n\n    this.axios.post(\"http://localhost:8080/product\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    })\n    .then(response => {\n      if (response.status === 201) {\n        this.initialize();\n        alert(\"เพิ่มสำเร็จ\");\n\n        // Check if window.product is defined and has a reload method\n        if (window.product && typeof window.product.reload === 'function') {\n  window.product.reload();\n} else {\n  console.error('Cannot call reload: window.product or window.product.reload is undefined');\n}\n\n      }\n    })\n    .catch(error => {\n      console.error(\"Error adding product:\", error);\n\n      if (error.response) {\n        console.log(\"Response data:\", error.response.data);\n        console.log(\"Response status:\", error.response.status);\n        console.log(\"Response headers:\", error.response.headers);\n      }\n    });\n  } catch (error) {\n    console.error(\"Error in addProduct:\", error);\n  }\n},\n\n\n\n\n\n\n    deleteItemConfirm() {\n      this.desserts.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n\n    close() {\n      this.dialog = false;\n      this.editedItem = Object.assign({}, this.defaultItem);\n      this.editedIndex = -1;\n    },\n\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}