{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data: () => ({\n    dialog: false,\n    dialogDelete: false,\n    headers: [{\n      text: \"Name\",\n      align: \"start\",\n      sortable: false,\n      value: \"productName\"\n    }, {\n      text: \"Picture\",\n      sortable: false,\n      value: \"productPicture\"\n    }, {\n      text: \"Description\",\n      value: \"productDescription\"\n    }, {\n      text: \"actions\",\n      align: \"start\",\n      sortable: false,\n      value: \"actions\"\n    }],\n    desserts: [],\n    editedIndex: -1,\n    editedItem: {\n      name: \"\",\n      calories: 0,\n      fat: 0,\n      carbs: 0,\n      protein: 0\n    },\n    defaultItem: {\n      name: \"\",\n      calories: 0,\n      fat: 0,\n      carbs: 0,\n      protein: 0\n    }\n  }),\n  scopedSlots: {\n    picture: item => {\n      return this.$createElement(\"img\", {\n        attrs: {\n          src: item.picture,\n          // ใช้ URL รูปภาพจากข้อมูล\n          alt: item.name,\n          // ใช้ชื่อเป็นคำอธิบายรูปภาพ\n          style: \"max-width: 100px;\" // กำหนดขนาดสูงสุดของรูปภาพ\n        }\n      });\n    }\n  },\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"New Product\" : \"Edit Product\";\n    }\n  },\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    }\n  },\n  created() {\n    this.initialize();\n  },\n  methods: {\n    async initialize() {\n      this.desserts = [];\n      try {\n        var data = await this.axios.get(\"http://localhost:9000/product\");\n        console.log(\"data product ====>\", data);\n        this.desserts = data.data;\n      } catch (error) {}\n    },\n    computed: {\n      formTitle() {\n        return this.editedIndex === -1 ? \"New Product\" : \"Edit Product\";\n      }\n    },\n    editItem(item) {\n      this.editedIndex = this.desserts.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n    async addProduct() {\n      try {\n        const formData = new FormData();\n        const data = {\n          productName: this.editedItem.productName,\n          productDescription: this.editedItem.productDescription\n        };\n        formData.append(\"body\", JSON.stringify(data));\n\n        // เพิ่มการส่งรูปภาพแบบ multipart/form-data เหมือนในโค้ดของคุณ\n        // ...\n\n        const response = await this.axios.put(`http://localhost:9000/product/${this.editedItem.productId}`,\n        // ส่งร้องขอ PUT ไปที่ URL ที่ถูกต้อง\n        formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n        if (response.status === 200) {\n          // สำเร็จ\n          this.initialize(); // ตัวอย่างการรีโหลดข้อมูลหลังจากแก้ไข\n          alert(\"แก้ไขสำเร็จ\");\n        }\n      } catch (error) {\n        console.error(\"ข้อผิดพลาดในการแก้ไขสินค้า:\", error);\n      }\n    },\n    async deleteItem(item) {\n      // this.editedIndex = this.desserts.indexOf(item);\n      // this.editedItem = Object.assign({}, item);\n      // this.dialogDelete = true;\n\n      try {\n        var data = await this.axios.delete(`http://localhost:9000/product/${item.productId}`);\n        if (data.status === 200) {\n          this.initialize();\n          alert(\"ลบสำเร็จ\");\n        }\n      } catch (error) {}\n    },\n    async addProduct() {\n      try {\n        // Create a new FormData object\n        const formData = new FormData();\n\n        // Append the fields to the FormData object\n        const data = {\n          productName: this.editedItem.productName,\n          productDescription: this.editedItem.productDescription\n        };\n        formData.append(\"body\", JSON.stringify(data));\n        formData.append(\"photo\", this.editedItem.selectedImage);\n        const response = await this.axios.post(\"http://localhost:9000/product\", formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\" // Set the content type to multipart/form-data\n          }\n        });\n\n        if (response.status === 201) {\n          // await this.initialize();\n          alert(\"เพิ่มสำเร็จ\");\n          window.product.reload();\n        }\n      } catch (error) {\n        console.error(\"Error adding product:\", error);\n      }\n    },\n    deleteItemConfirm() {\n      this.desserts.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    save() {\n      if (this.editedIndex > -1) {\n        Object.assign(this.desserts[this.editedIndex], this.editedItem);\n      } else {\n        this.desserts.push(this.editedItem);\n      }\n      this.close();\n    },\n    handleImageUpload(event) {\n      const selectedFile = event.target.files[0]; // Get the selected file\n      // You can now do something with the selected image file, for example, send it to the server.\n      // Here, we'll just store the selected file in a data property for reference.\n      this.editedItem.selectedImage = selectedFile;\n    }\n  }\n};","map":{"version":3,"names":["data","dialog","dialogDelete","headers","text","align","sortable","value","desserts","editedIndex","editedItem","name","calories","fat","carbs","protein","defaultItem","scopedSlots","picture","item","$createElement","attrs","src","alt","style","computed","formTitle","watch","val","close","closeDelete","created","initialize","methods","axios","get","console","log","error","editItem","indexOf","Object","assign","addProduct","formData","FormData","productName","productDescription","append","JSON","stringify","response","put","productId","status","alert","deleteItem","delete","selectedImage","post","window","product","reload","deleteItemConfirm","splice","$nextTick","save","push","handleImageUpload","event","selectedFile","target","files"],"sources":["src/components/EditDelete.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <v-data-table :headers=\"headers\" :items=\"desserts\" class=\"elevation-1\">\r\n      <template v-slot:top>\r\n        <v-toolbar flat>\r\n          <v-toolbar-title>จัดการ Product</v-toolbar-title>\r\n          <v-divider class=\"mx-4\" inset vertical></v-divider>\r\n          <v-spacer></v-spacer>\r\n          <v-dialog v-model=\"dialog\" max-width=\"500px\">\r\n            <template v-slot:activator=\"{ on, attrs }\">\r\n              <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\">\r\n                เพิ่ม\r\n              </v-btn>\r\n            </template>\r\n            <v-card>\r\n              <v-card-title>\r\n                <span class=\"text-h5\">{{ formTitle }}</span>\r\n              </v-card-title>\r\n\r\n              <v-card-text>\r\n                <v-container>\r\n                  <v-row>\r\n                    <v-col cols=\"2\" sm=\"12\" md=\"12\">\r\n                      <input\r\n                        type=\"file\"   \r\n                        v-on:change=\"handleImageUpload\" \r\n                      ></input>\r\n                    </v-col>\r\n\r\n                    <v-col cols=\"1\" sm=\"6\" md=\"4\">\r\n                      <v-text-field\r\n                        v-model=\"editedItem.productName\"\r\n                        label=\"Name\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n\r\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\r\n                      <v-text-field\r\n                        v-model=\"editedItem.productDescription\"\r\n                        label=\"Description\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                  </v-row>\r\n                </v-container>\r\n              </v-card-text>\r\n\r\n              <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn color=\"red darken-1\" text @click=\"close\"> Cancel </v-btn>\r\n                <v-btn color=\"blue darken-1\" text @click=\"addProduct\">\r\n                  Save\r\n                </v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n          <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\r\n            <v-card>\r\n              <v-card-title class=\"text-h5\"\r\n                >คุณแน่ใจหรือว่าต้องการลบรายการนี้?</v-card-title\r\n              >\r\n              <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn color=\"blue darken-1\" text @click=\"closeDelete\"\r\n                  >Cancel</v-btn\r\n                >\r\n                <v-btn color=\"red darken-1\" text @click=\"deleteItemConfirm\"\r\n                  >OK</v-btn\r\n                >\r\n                <v-spacer></v-spacer>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n        </v-toolbar>\r\n      </template>\r\n      <template v-slot:item.productPicture=\"{ item }\">\r\n        <img\r\n          :src=\"'data:image/jpeg;base64,' + item.productPicture\"\r\n          alt=\"Image\"\r\n          style=\"max-width: 200px\"\r\n        />\r\n      </template>\r\n\r\n      <template v-slot:item.actions=\"{ item }\">\r\n        <v-btn small outlined @click=\"editItem(item)\" color=\"blue\">\r\n          <v-icon>\r\n            mdi-pencil\r\n          </v-icon>\r\n        </v-btn>\r\n      <v-btn small outlined @click=\"deleteItem(item)\" color=\"red\" class=\"ml-2\">\r\n      <v-icon>\r\n        mdi-delete\r\n      </v-icon>\r\n      </v-btn>\r\n      </template>\r\n      <template v-slot:no-data>\r\n        <v-btn color=\"primary\" @click=\"initialize\"> Reset </v-btn>\r\n      </template>\r\n    </v-data-table>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  data: () => ({\r\n    dialog: false,\r\n    dialogDelete: false,\r\n    headers: [\r\n      {\r\n        text: \"Name\",\r\n        align: \"start\",\r\n        sortable: false,\r\n        value: \"productName\",\r\n      },\r\n      {\r\n        text: \"Picture\",\r\n        sortable: false,\r\n        value: \"productPicture\",\r\n      },\r\n      {\r\n        text: \"Description\",\r\n        value: \"productDescription\",\r\n      },\r\n      {\r\n        text: \"actions\",\r\n        align: \"start\",\r\n        sortable: false,\r\n        value: \"actions\",\r\n      },\r\n    ],\r\n\r\n    desserts: [],\r\n    editedIndex: -1,\r\n\r\n    editedItem: {\r\n      name: \"\",\r\n      calories: 0,\r\n      fat: 0,\r\n      carbs: 0,\r\n      protein: 0,\r\n    },\r\n    defaultItem: {\r\n      name: \"\",\r\n      calories: 0,\r\n      fat: 0,\r\n      carbs: 0,\r\n      protein: 0,\r\n    },\r\n  }),\r\n  scopedSlots: {\r\n    picture: (item) => {\r\n      return this.$createElement(\"img\", {\r\n        attrs: {\r\n          src: item.picture, // ใช้ URL รูปภาพจากข้อมูล\r\n          alt: item.name, // ใช้ชื่อเป็นคำอธิบายรูปภาพ\r\n          style: \"max-width: 100px;\", // กำหนดขนาดสูงสุดของรูปภาพ\r\n        },\r\n      });\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    formTitle() {\r\n      return this.editedIndex === -1 ? \"New Product\" : \"Edit Product\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    dialog(val) {\r\n      val || this.close();\r\n    },\r\n    dialogDelete(val) {\r\n      val || this.closeDelete();\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.initialize();\r\n  },\r\n\r\n  methods: {\r\n    async initialize() {\r\n      this.desserts = [];\r\n      try {\r\n        var data = await this.axios.get(\"http://localhost:9000/product\");\r\n        console.log(\"data product ====>\", data);\r\n        this.desserts = data.data;\r\n      } catch (error) {}\r\n    },\r\n\r\n    computed: {\r\n      formTitle() {\r\n        return this.editedIndex === -1 ? \"New Product\" : \"Edit Product\";\r\n      },\r\n    },\r\n\r\n    editItem(item) {\r\n  this.editedIndex = this.desserts.indexOf(item);\r\n  this.editedItem = Object.assign({}, item);\r\n  this.dialog = true;\r\n},\r\nasync addProduct() {\r\n  try {\r\n    const formData = new FormData();\r\n    const data = {\r\n      productName: this.editedItem.productName,\r\n      productDescription: this.editedItem.productDescription,\r\n    };\r\n    formData.append(\"body\", JSON.stringify(data));\r\n\r\n    // เพิ่มการส่งรูปภาพแบบ multipart/form-data เหมือนในโค้ดของคุณ\r\n    // ...\r\n\r\n    const response = await this.axios.put(\r\n      `http://localhost:9000/product/${this.editedItem.productId}`, // ส่งร้องขอ PUT ไปที่ URL ที่ถูกต้อง\r\n      formData,\r\n      {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.status === 200) {\r\n      // สำเร็จ\r\n      this.initialize(); // ตัวอย่างการรีโหลดข้อมูลหลังจากแก้ไข\r\n      alert(\"แก้ไขสำเร็จ\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"ข้อผิดพลาดในการแก้ไขสินค้า:\", error);\r\n  }\r\n},\r\n\r\n    \r\n\r\n    async deleteItem(item) {\r\n      // this.editedIndex = this.desserts.indexOf(item);\r\n      // this.editedItem = Object.assign({}, item);\r\n      // this.dialogDelete = true;\r\n\r\n      try {\r\n        var data = await this.axios.delete(\r\n          `http://localhost:9000/product/${item.productId}`\r\n        );\r\n\r\n        if (data.status === 200) {\r\n          this.initialize();\r\n          alert(\"ลบสำเร็จ\");\r\n        }\r\n      } catch (error) {}\r\n    },\r\n    async addProduct() {\r\n      try {\r\n        // Create a new FormData object\r\n        const formData = new FormData();\r\n\r\n        // Append the fields to the FormData object\r\n        const data = {\r\n          productName: this.editedItem.productName,\r\n          productDescription: this.editedItem.productDescription,\r\n        };\r\n        formData.append(\"body\", JSON.stringify(data));\r\n        formData.append(\"photo\", this.editedItem.selectedImage);\r\n\r\n        const response = await this.axios.post(\r\n          \"http://localhost:9000/product\",\r\n          formData,\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\", // Set the content type to multipart/form-data\r\n            },\r\n          }\r\n        );\r\n\r\n        if (response.status === 201) {\r\n          // await this.initialize();\r\n          alert(\"เพิ่มสำเร็จ\");\r\n          window.product.reload()\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error adding product:\", error);\r\n      }\r\n    },\r\n\r\n    deleteItemConfirm() {\r\n      this.desserts.splice(this.editedIndex, 1);\r\n      this.closeDelete();\r\n    },\r\n\r\n    close() {\r\n      this.dialog = false;\r\n      this.$nextTick(() => {\r\n        this.editedItem = Object.assign({}, this.defaultItem);\r\n        this.editedIndex = -1;\r\n      });\r\n    },\r\n\r\n    closeDelete() {\r\n      this.dialogDelete = false;\r\n      this.$nextTick(() => {\r\n        this.editedItem = Object.assign({}, this.defaultItem);\r\n        this.editedIndex = -1;\r\n      });\r\n    },\r\n\r\n    save() {\r\n      if (this.editedIndex > -1) {\r\n        Object.assign(this.desserts[this.editedIndex], this.editedItem);\r\n      } else {\r\n        this.desserts.push(this.editedItem);\r\n      }\r\n      this.close();\r\n    },\r\n    handleImageUpload(event) {\r\n      const selectedFile = event.target.files[0]; // Get the selected file\r\n      // You can now do something with the selected image file, for example, send it to the server.\r\n      // Here, we'll just store the selected file in a data property for reference.\r\n      this.editedItem.selectedImage = selectedFile;\r\n    },\r\n  },\r\n};\r\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}